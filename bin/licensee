#!/usr/bin/env ruby
require_relative "../lib/licensee"

path = ARGV[0] || Dir.pwd

Licensee.package_manager_files = true
project = Licensee::Project.new(path)
license = project.matched_file

if project.license_file
  puts "License file: #{project.license_file.path}"
  puts "Attribution: #{project.license_file.attribution}" if project.license_file.attribution
end

if license
  puts "License: #{license.match ? license.match.meta['title'] : 'no license'}"
  puts "Confidence: #{license.confidence}%"
  puts "Method: #{license.matcher.class}"
else
  puts "Unknown"
end
